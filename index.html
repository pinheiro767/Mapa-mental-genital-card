<!doctype html>
<html lang="pt-br">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Casos Cl√≠nicos: Sistema Genital</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 0;
            background: transparent;
            color: #333;
            min-height: 100%;
            width: 100%;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .bubble {
            position: fixed;
            bottom: -150px;
            border-radius: 50%;
            opacity: 0.6;
            animation: float-up linear infinite;
            pointer-events: none;
            z-index: 0;
            box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.4), 0 0 25px rgba(255, 255, 255, 0.3);
        }
        
        .bubble.color-1 {
            background: radial-gradient(circle at 30% 30%, rgba(255, 107, 107, 0.8), rgba(255, 107, 107, 0.3));
        }
        
        .bubble.color-2 {
            background: radial-gradient(circle at 30% 30%, rgba(78, 205, 196, 0.8), rgba(78, 205, 196, 0.3));
        }
        
        .bubble.color-3 {
            background: radial-gradient(circle at 30% 30%, rgba(255, 195, 113, 0.8), rgba(255, 195, 113, 0.3));
        }
        
        .bubble.color-4 {
            background: radial-gradient(circle at 30% 30%, rgba(162, 155, 254, 0.8), rgba(162, 155, 254, 0.3));
        }
        
        .bubble.color-5 {
            background: radial-gradient(circle at 30% 30%, rgba(255, 159, 243, 0.8), rgba(255, 159, 243, 0.3));
        }
        
        .bubble.color-6 {
            background: radial-gradient(circle at 30% 30%, rgba(85, 230, 193, 0.8), rgba(85, 230, 193, 0.3));
        }
        
        @keyframes float-up {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-120vh) translateX(100px) scale(1.2);
                opacity: 0;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes coinPop {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5) rotate(180deg);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -150%) scale(1) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes bombShake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
            10% { transform: translate(-50%, -50%) rotate(-10deg) scale(1.1); }
            20% { transform: translate(-50%, -50%) rotate(10deg) scale(1.1); }
            30% { transform: translate(-50%, -50%) rotate(-10deg) scale(1.1); }
            40% { transform: translate(-50%, -50%) rotate(10deg) scale(1.1); }
            50% { transform: translate(-50%, -50%) rotate(0deg) scale(1.2); }
            60% { transform: translate(-50%, -50%) rotate(0deg) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) rotate(0deg) scale(0); opacity: 0; }
        }
        
        .coin-animation {
            position: fixed;
            font-size: 4em;
            z-index: 9999;
            pointer-events: none;
            animation: coinPop 1s ease-out forwards;
        }
        
        .bomb-animation {
            position: fixed;
            font-size: 6em;
            z-index: 9999;
            pointer-events: none;
            animation: bombShake 1s ease-out forwards;
        }
        
        @keyframes scoreUpdate {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); color: #f39c12; }
            100% { transform: scale(1); }
        }
        
        .score-update {
            animation: scoreUpdate 0.5s ease-out;
        }
        
        .game-wrapper {
            width: 100%;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .header-section {
            width: 100%;
            max-width: 1000px;
            text-align: center;
            margin-bottom: 20px;
            animation: fadeIn 0.8s ease-out;
        }
        
        h1 {
            color: #000000;
            font-size: 2.5em;
            margin: 0 0 15px 0;
            text-align: center;
            text-shadow: 3px 3px 6px rgba(255,255,255,0.3);
            animation: fadeIn 1s ease-out;
        }
        
        .page-instructions {
            color: #ffffff;
            text-align: center;
            margin-bottom: 0;
            font-size: 1.05em;
            line-height: 1.6;
            max-width: 900px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        
        h2 {
            color: #2c3e50;
            font-size: 1.5em;
            margin: 0 0 10px 0;
        }
        
        h3 {
            color: #34495e;
            font-size: 1.1em;
            margin: 0 0 12px 0;
            font-weight: 600;
        }
        
        #game-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 1000px;
            background-color: rgba(255, 255, 255, 0.98);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            animation: fadeIn 1s ease-out 0.2s both;
            backdrop-filter: blur(10px);
        }
        
        #case-display {
            background: linear-gradient(135deg, #e8f4f8 0%, #d4ebf0 100%);
            border: 2px solid #b3d9e8;
            padding: 24px;
            margin-bottom: 25px;
            border-radius: 20px;
            font-size: 1.05em;
            line-height: 1.8;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            animation: slideIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }
        
        #case-display::before {
            content: 'üìã';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 2em;
            opacity: 0.2;
        }
        
        #current-case-text {
            margin: 10px 0 0 0;
            color: #2c5f77;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }
        
        #draggable-phrases-area {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 18px;
            border: 2px dashed #bdbdbd;
            border-radius: 12px;
            background-color: #fafafa;
            min-height: 100px;
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }
        
        .draggable-phrase {
            background: linear-gradient(135deg, #b8d4f1 0%, #a0c4ff 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: grab;
            font-size: 0.9em;
            box-shadow: 0 6px 16px rgba(160, 196, 255, 0.25);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
            animation: slideIn 0.4s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }
        
        .draggable-phrase::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .draggable-phrase:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .draggable-phrase:hover {
            background: linear-gradient(135deg, #a0c4ff 0%, #8ab4f8 100%);
            transform: translateY(-4px) scale(1.08);
            box-shadow: 0 10px 24px rgba(160, 196, 255, 0.35);
        }
        
        .draggable-phrase:active {
            cursor: grabbing;
            transform: scale(0.98);
        }
        
        .draggable-phrase.dragged {
            opacity: 0.4;
            transform: scale(0.95);
        }
        
        #response-drop-area {
            min-height: 130px;
            border: 3px dashed #d4b5f0;
            border-radius: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f4fc 0%, #f3ebfa 100%);
            margin-bottom: 25px;
            color: #9575cd;
            font-style: italic;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: flex-start;
            align-content: flex-start;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        
        #response-drop-area::after {
            content: 'üéØ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            opacity: 0.1;
            pointer-events: none;
        }
        
        #response-drop-area.has-phrases::after {
            display: none;
        }
        
        #response-drop-area.drag-over {
            background: linear-gradient(135deg, #e8d9f5 0%, #f0e3fa 100%);
            border-color: #b39ddb;
            transform: scale(1.02);
            box-shadow: 0 0 24px rgba(179, 157, 219, 0.3);
        }
        
        #response-drop-area.has-phrases {
            font-style: normal;
            color: inherit;
        }
        
        .response-phrase {
            background: linear-gradient(135deg, #c5b3e6 0%, #b39ddb 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            font-size: 0.9em;
            box-shadow: 0 6px 16px rgba(179, 157, 219, 0.25);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: pulse 0.6s ease-out;
            position: relative;
            z-index: 1;
        }
        
        .remove-phrase {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .remove-phrase:hover {
            background: rgba(255,255,255,0.6);
            transform: rotate(90deg) scale(1.1);
        }
        
        .feedback-area {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 1em;
            line-height: 1.7;
            display: none;
            animation: slideIn 0.5s ease-out;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        
        .feedback-area.correct {
            background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
            color: #1b5e20;
            border: 2px solid #66bb6a;
            display: block;
        }
        
        .feedback-area.correct::before {
            content: '‚úì ';
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .feedback-area.incorrect {
            background: linear-gradient(135deg, #ffcdd2 0%, #ef9a9a 100%);
            color: #b71c1c;
            border: 2px solid #e57373;
            display: block;
        }
        
        .feedback-area.incorrect::before {
            content: '‚úó ';
            font-size: 1.5em;
            font-weight: bold;
        }
        
        #controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        button {
            background: linear-gradient(135deg, #a0d8a8 0%, #8bc5a0 100%);
            color: white;
            border: none;
            padding: 16px 36px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            box-shadow: 0 8px 24px rgba(139, 197, 160, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            text-transform: none;
            letter-spacing: 0.3px;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        button:hover::before {
            width: 300px;
            height: 300px;
        }
        
        button:hover {
            background: linear-gradient(135deg, #8bc5a0 0%, #6fb587 100%);
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 12px 32px rgba(139, 197, 160, 0.4);
        }
        
        button:active {
            transform: translateY(0) scale(0.98);
        }
        
        button:disabled {
            background: linear-gradient(135deg, #bdbdbd 0%, #9e9e9e 100%);
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
            box-shadow: none;
        }
        
        button:disabled::before {
            display: none;
        }
        
        #next-case-btn {
            background: linear-gradient(135deg, #a0c4ff 0%, #8ab4f8 100%);
            box-shadow: 0 8px 24px rgba(160, 196, 255, 0.3);
        }
        
        #next-case-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #8ab4f8 0%, #6fa3f0 100%);
            box-shadow: 0 12px 32px rgba(160, 196, 255, 0.4);
        }
        
        .completion-screen {
            text-align: center;
            padding: 50px 20px;
            animation: fadeIn 1s ease-out;
        }
        
        .completion-screen h2 {
            font-size: 3em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #a8c0ff 0%, #c8b7f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .completion-emoji {
            font-size: 5em;
            animation: pulse 2s infinite;
            display: block;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .game-wrapper {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
                margin-bottom: 10px;
            }
            
            .page-instructions {
                font-size: 0.95em;
            }
            
            #game-container {
                padding: 18px;
                border-radius: 15px;
            }
            
            #case-display {
                padding: 15px;
                font-size: 0.95em;
            }
            
            h2 {
                font-size: 1.3em;
            }
            
            h3 {
                font-size: 1em;
            }
            
            .draggable-phrase, .response-phrase {
                font-size: 0.85em;
                padding: 8px 14px;
            }
            
            #draggable-phrases-area {
                padding: 12px;
                gap: 8px;
                min-height: 80px;
            }
            
            #response-drop-area {
                padding: 12px;
                min-height: 100px;
                gap: 8px;
            }
            
            button {
                padding: 12px 24px;
                font-size: 0.9em;
            }
            
            .feedback-area {
                padding: 15px;
                font-size: 0.95em;
            }
            
            .completion-screen h2 {
                font-size: 2em;
            }
            
            .completion-emoji {
                font-size: 3.5em;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.5em;
            }
            
            .page-instructions {
                font-size: 0.9em;
            }
            
            #game-container {
                padding: 15px;
            }
            
            #case-display {
                padding: 12px;
            }
            
            .draggable-phrase, .response-phrase {
                font-size: 0.8em;
                padding: 7px 12px;
            }
            
            button {
                padding: 10px 20px;
                font-size: 0.85em;
            }
            
            #controls {
                gap: 8px;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="game-wrapper">
   <div class="header-section">
    <h1 id="page-title">Casos Cl√≠nicos: Sistema Genital</h1>
    <p class="page-instructions" id="page-instructions">Leia o caso cl√≠nico e arraste as frases da caixa "Op√ß√µes de Frases" para a "Sua Resposta" para descrever ou diagnosticar a condi√ß√£o. Clique em "Verificar Resposta" para feedback.</p>
   </div>
   <div id="game-container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
     <div class="progress-bar" style="flex: 1; min-width: 200px; margin: 0;">
      <div class="progress-fill" id="progress-fill" style="width: 25%;"></div>
     </div>
     <div style="display: flex; gap: 20px; align-items: center;">
      <div class="score-display" id="score-display" style="font-size: 1.3em; font-weight: bold; color: #f39c12; display: flex; align-items: center; gap: 8px;"><span style="font-size: 1.5em;">ü™ô</span> <span id="coin-count">0</span>
      </div>
      <div class="score-display" id="total-score" style="font-size: 1.3em; font-weight: bold; color: #27ae60; display: flex; align-items: center; gap: 8px;"><span style="font-size: 1.5em;">‚≠ê</span> <span id="score-count">0</span>
      </div>
     </div>
    </div>
    <div id="case-display">
     <h2>Caso Cl√≠nico #<span id="case-number">1</span>:</h2>
     <p id="current-case-text"></p>
    </div>
    <h3 id="phrases-label">Op√ß√µes de Frases:</h3>
    <div id="draggable-phrases-area"></div>
    <h3 id="response-label">Sua Resposta:</h3>
    <div id="response-drop-area" data-placeholder="Arraste as frases que voc√™ acredita serem relevantes aqui."><span class="placeholder-text">Arraste as frases que voc√™ acredita serem relevantes aqui.</span>
    </div>
    <div id="feedback-message" class="feedback-area"></div>
    <div id="controls"><button id="check-answer-btn">Verificar Resposta</button> <button id="next-case-btn" disabled>Pr√≥ximo Caso</button>
    </div>
   </div>
  </div>
  <script>
        const cases = [
            {
                id: 1,
                case: "Um homem de 65 anos apresenta dificuldade para urinar, jato fraco e sensa√ß√£o de esvaziamento incompleto da bexiga. Relata tamb√©m aumento da frequ√™ncia urin√°ria noturna.",
                allPhrases: [
                    "Aumento da pr√≥stata", "Hiperplasia prost√°tica benigna", "Obstru√ß√£o da uretra", "Produ√ß√£o de testosterona",
                    "Inflama√ß√£o do epid√≠dimo", "Libera√ß√£o de estrog√™nio", "Aumento da produ√ß√£o de espermatozoides",
                    "Problema na ves√≠cula seminal", "Diminui√ß√£o da produ√ß√£o de urina"
                ],
                correctPhrases: [
                    "Aumento da pr√≥stata", "Hiperplasia prost√°tica benigna", "Obstru√ß√£o da uretra"
                ],
                feedback: "Este caso descreve sintomas comuns de Hiperplasia Prost√°tica Benigna (HPB), uma condi√ß√£o que leva ao aumento da pr√≥stata e, consequentemente, √† obstru√ß√£o do fluxo urin√°rio pela uretra."
            },
            {
                id: 2,
                case: "Uma mulher de 28 anos relata c√≥licas menstruais intensas e sangramento abundante h√° v√°rios meses. Ela tamb√©m menciona dor durante as rela√ß√µes e dificuldade para engravidar.",
                allPhrases: [
                    "Endom√©trio espessado", "Presen√ßa de tecido endometrial fora do √∫tero", "Endometriose",
                    "Produ√ß√£o excessiva de progesterona", "Ciclo menstrual irregular", "Problemas nas tubas uterinas",
                    "Produ√ß√£o de espermatozoides", "Cisto ovariano rompido", "Menopausa precoce"
                ],
                correctPhrases: [
                    "Presen√ßa de tecido endometrial fora do √∫tero", "Endometriose", "Ciclo menstrual irregular", "Problemas nas tubas uterinas"
                ],
                feedback: "Os sintomas apontam para Endometriose, caracterizada pelo crescimento de tecido semelhante ao endom√©trio fora do √∫tero, o que pode causar dor e infertilidade. Problemas nas tubas uterinas tamb√©m podem ser uma complica√ß√£o."
            },
            {
                id: 3,
                case: "Um adolescente de 16 anos percebeu que seus test√≠culos n√£o desceram completamente para o escroto ao nascer, mas agora, ao fazer um autoexame, nota um aumento de volume indolor em um dos test√≠culos.",
                allPhrases: [
                    "Criptorquidia (test√≠culo n√£o descendido)", "Risco aumentado de c√¢ncer testicular", "Autoexame testicular",
                    "Produ√ß√£o de estrog√™nio", "Inflama√ß√£o da pr√≥stata", "Vasectomia",
                    "Crescimento normal dos test√≠culos", "Disfun√ß√£o er√©til", "Infec√ß√£o urin√°ria"
                ],
                correctPhrases: [
                    "Criptorquidia (test√≠culo n√£o descendido)", "Risco aumentado de c√¢ncer testicular", "Autoexame testicular"
                ],
                feedback: "A criptorquidia √© um fator de risco conhecido para o c√¢ncer testicular, mesmo ap√≥s corre√ß√£o cirÔøΩÔøΩrgica. O autoexame √© crucial para a detec√ß√£o precoce de quaisquer altera√ß√µes."
            },
            {
                id: 4,
                case: "Uma mulher de 35 anos est√° tentando engravidar h√° mais de um ano sem sucesso. Exames mostram que ela n√£o est√° ovulando regularmente, e seus n√≠veis hormonais de FSH e LH est√£o alterados.",
                allPhrases: [
                    "Problemas na oog√™nese", "Ov√°rios polic√≠sticos", "Disfun√ß√£o hormonal (FSH/LH)",
                    "Dificuldade de fertiliza√ß√£o", "Defici√™ncia de testosterona", "Endom√©trio fino",
                    "Produ√ß√£o excessiva de progesterona", "Menstrua√ß√£o abundante", "Inflama√ß√£o vaginal"
                ],
                correctPhrases: [
                    "Problemas na oog√™nese", "Ov√°rios polic√≠sticos", "Disfun√ß√£o hormonal (FSH/LH)", "Dificuldade de fertiliza√ß√£o"
                ],
                feedback: "A anovula√ß√£o e as altera√ß√µes hormonais sugerem S√≠ndrome dos Ov√°rios Polic√≠sticos (SOP) ou outra disfun√ß√£o ovariana que afeta a oog√™nese e a capacidade de fertiliza√ß√£o."
            }
        ];

        let currentCaseIndex = 0;
        let draggedElement = null;
        let selectedPhrases = [];
        let totalScore = 0;
        let coins = 0;

        const defaultConfig = {
            page_title: "Casos Cl√≠nicos: Sistema Genital",
            page_instructions: "Leia o caso cl√≠nico e arraste as frases da caixa \"OpÔøΩÔøΩ√µes de Frases\" para a \"Sua Resposta\" para descrever ou diagnosticar a condi√ß√£o. Clique em \"Verificar Resposta\" para feedback.",
            phrases_label: "Op√ß√µes de Frases:",
            response_label: "Sua Resposta:",
            response_placeholder: "Arraste as frases que voc√™ acredita serem relevantes aqui.",
            check_button_text: "Verificar Resposta",
            next_button_text: "Pr√≥ximo Caso",
            background_color: "#667eea",
            secondary_surface_color: "#ffffff",
            text_color: "#333333",
            primary_action_color: "#4caf50",
            secondary_action_color: "#2196f3",
            font_family: "Segoe UI",
            font_size: 16
        };

        async function onConfigChange(config) {
            const baseFont = config.font_family || defaultConfig.font_family;
            const baseFontStack = `${baseFont}, Tahoma, Geneva, Verdana, sans-serif`;
            const baseSize = config.font_size || defaultConfig.font_size;
            
            const bgColor = config.background_color || defaultConfig.background_color;
            const surfaceColor = config.secondary_surface_color || defaultConfig.secondary_surface_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
            const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

            document.body.style.fontFamily = baseFontStack;
            document.body.style.fontSize = `${baseSize}px`;
            document.body.style.background = 'transparent';
            
            document.getElementById('page-title').textContent = config.page_title || defaultConfig.page_title;
            document.getElementById('page-title').style.fontSize = `${baseSize * 2}px`;
            
            document.getElementById('page-instructions').textContent = config.page_instructions || defaultConfig.page_instructions;
            document.getElementById('page-instructions').style.fontSize = `${baseSize}px`;
            
            document.getElementById('phrases-label').textContent = config.phrases_label || defaultConfig.phrases_label;
            document.getElementById('phrases-label').style.fontSize = `${baseSize * 1.1}px`;
            
            document.getElementById('response-label').textContent = config.response_label || defaultConfig.response_label;
            document.getElementById('response-label').style.fontSize = `${baseSize * 1.1}px`;
            
            const placeholder = document.querySelector('.placeholder-text');
            if (placeholder) {
                placeholder.textContent = config.response_placeholder || defaultConfig.response_placeholder;
            }
            document.getElementById('response-drop-area').setAttribute('data-placeholder', config.response_placeholder || defaultConfig.response_placeholder);
            
            document.getElementById('check-answer-btn').textContent = config.check_button_text || defaultConfig.check_button_text;
            document.getElementById('check-answer-btn').style.fontSize = `${baseSize}px`;
            document.getElementById('check-answer-btn').style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${adjustColorBrightness(primaryColor, -10)} 100%)`;
            
            document.getElementById('next-case-btn').textContent = config.next_button_text || defaultConfig.next_button_text;
            document.getElementById('next-case-btn').style.fontSize = `${baseSize}px`;
            document.getElementById('next-case-btn').style.background = `linear-gradient(135deg, ${secondaryColor} 0%, ${adjustColorBrightness(secondaryColor, -10)} 100%)`;
            
            document.getElementById('game-container').style.backgroundColor = surfaceColor;
            
            document.querySelectorAll('h2, h3').forEach(el => {
                el.style.color = textColor;
            });
            
            document.querySelectorAll('.draggable-phrase').forEach(el => {
                el.style.background = `linear-gradient(135deg, ${secondaryColor} 0%, ${adjustColorBrightness(secondaryColor, -10)} 100%)`;
            });
            
            document.querySelectorAll('.response-phrase').forEach(el => {
                el.style.background = `linear-gradient(135deg, ${adjustColorBrightness(primaryColor, 20)} 0%, ${primaryColor} 100%)`;
            });
        }

        function adjustColorBrightness(hex, percent) {
            const num = parseInt(hex.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.max(0, Math.min(255, (num >> 16) + amt));
            const G = Math.max(0, Math.min(255, (num >> 8 & 0x00FF) + amt));
            const B = Math.max(0, Math.min(255, (num & 0x0000FF) + amt));
            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
        }
        
        function showCoinAnimation() {
            const numberOfCoins = 5;
            for (let i = 0; i < numberOfCoins; i++) {
                setTimeout(() => {
                    const coin = document.createElement('div');
                    coin.className = 'coin-animation';
                    coin.textContent = 'ü™ô';
                    coin.style.left = (50 + (Math.random() - 0.5) * 20) + '%';
                    coin.style.top = (50 + (Math.random() - 0.5) * 20) + '%';
                    document.body.appendChild(coin);
                    
                    setTimeout(() => coin.remove(), 1000);
                }, i * 100);
            }
            
            const coinDisplay = document.getElementById('coin-count');
            coinDisplay.classList.add('score-update');
            setTimeout(() => coinDisplay.classList.remove('score-update'), 500);
        }
        
        function showBombAnimation() {
            const bomb = document.createElement('div');
            bomb.className = 'bomb-animation';
            bomb.textContent = 'üí£';
            bomb.style.left = '50%';
            bomb.style.top = '50%';
            document.body.appendChild(bomb);
            
            setTimeout(() => {
                bomb.textContent = 'üí•';
            }, 500);
            
            setTimeout(() => bomb.remove(), 1000);
        }
        
        function updateScore(points) {
            totalScore += points;
            const scoreElement = document.getElementById('score-count');
            scoreElement.textContent = totalScore;
            scoreElement.classList.add('score-update');
            setTimeout(() => scoreElement.classList.remove('score-update'), 500);
        }
        
        function updateCoins(amount) {
            coins += amount;
            const coinElement = document.getElementById('coin-count');
            coinElement.textContent = coins;
        }

        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.background_color || defaultConfig.background_color,
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        },
                        {
                            get: () => config.secondary_surface_color || defaultConfig.secondary_surface_color,
                            set: (value) => {
                                config.secondary_surface_color = value;
                                window.elementSdk.setConfig({ secondary_surface_color: value });
                            }
                        },
                        {
                            get: () => config.text_color || defaultConfig.text_color,
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        },
                        {
                            get: () => config.primary_action_color || defaultConfig.primary_action_color,
                            set: (value) => {
                                config.primary_action_color = value;
                                window.elementSdk.setConfig({ primary_action_color: value });
                            }
                        },
                        {
                            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                            set: (value) => {
                                config.secondary_action_color = value;
                                window.elementSdk.setConfig({ secondary_action_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: {
                        get: () => config.font_family || defaultConfig.font_family,
                        set: (value) => {
                            config.font_family = value;
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    },
                    fontSizeable: {
                        get: () => config.font_size || defaultConfig.font_size,
                        set: (value) => {
                            config.font_size = value;
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["page_title", config.page_title || defaultConfig.page_title],
                    ["page_instructions", config.page_instructions || defaultConfig.page_instructions],
                    ["phrases_label", config.phrases_label || defaultConfig.phrases_label],
                    ["response_label", config.response_label || defaultConfig.response_label],
                    ["response_placeholder", config.response_placeholder || defaultConfig.response_placeholder],
                    ["check_button_text", config.check_button_text || defaultConfig.check_button_text],
                    ["next_button_text", config.next_button_text || defaultConfig.next_button_text]
                ])
            });
        }

        function loadCase(index) {
            const currentCase = cases[index];
            selectedPhrases = [];
            
            const progressPercent = ((index + 1) / cases.length) * 100;
            document.getElementById('progress-fill').style.width = progressPercent + '%';
            
            document.getElementById('case-number').textContent = currentCase.id;
            document.getElementById('current-case-text').textContent = currentCase.case;
            
            const phrasesArea = document.getElementById('draggable-phrases-area');
            phrasesArea.innerHTML = '';
            
            const shuffledPhrases = [...currentCase.allPhrases].sort(() => Math.random() - 0.5);
            
            shuffledPhrases.forEach((phrase, idx) => {
                const phraseElement = document.createElement('div');
                phraseElement.className = 'draggable-phrase';
                phraseElement.textContent = phrase;
                phraseElement.draggable = true;
                phraseElement.dataset.phrase = phrase;
                phraseElement.style.animationDelay = `${idx * 0.05}s`;
                
                phraseElement.addEventListener('dragstart', handleDragStart);
                phraseElement.addEventListener('dragend', handleDragEnd);
                
                phrasesArea.appendChild(phraseElement);
            });
            
            const dropArea = document.getElementById('response-drop-area');
            dropArea.innerHTML = '<span class="placeholder-text">Arraste as frases que voc√™ acredita serem relevantes aqui.</span>';
            dropArea.classList.remove('has-phrases');
            
            const config = window.elementSdk?.config || defaultConfig;
            const placeholder = dropArea.querySelector('.placeholder-text');
            if (placeholder) {
                placeholder.textContent = config.response_placeholder || defaultConfig.response_placeholder;
            }
            
            document.getElementById('feedback-message').style.display = 'none';
            document.getElementById('feedback-message').className = 'feedback-area';
            document.getElementById('check-answer-btn').disabled = false;
            document.getElementById('next-case-btn').disabled = true;
        }

        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragged');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', e.target.dataset.phrase);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragged');
        }

        const dropArea = document.getElementById('response-drop-area');

        dropArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            dropArea.classList.add('drag-over');
        });

        dropArea.addEventListener('dragleave', () => {
            dropArea.classList.remove('drag-over');
        });

        dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dropArea.classList.remove('drag-over');
            
            if (draggedElement && draggedElement.classList.contains('draggable-phrase')) {
                const phrase = e.dataTransfer.getData('text/plain');
                
                if (!selectedPhrases.includes(phrase)) {
                    selectedPhrases.push(phrase);
                    
                    const placeholder = dropArea.querySelector('.placeholder-text');
                    if (placeholder) {
                        placeholder.remove();
                        dropArea.classList.add('has-phrases');
                    }
                    
                    const responsePhrase = document.createElement('div');
                    responsePhrase.className = 'response-phrase';
                    responsePhrase.innerHTML = `
                        <span>${phrase}</span>
                        <button class="remove-phrase" aria-label="Remover frase">√ó</button>
                    `;
                    
                    responsePhrase.querySelector('.remove-phrase').addEventListener('click', () => {
                        selectedPhrases = selectedPhrases.filter(p => p !== phrase);
                        responsePhrase.remove();
                        
                        const phrasesArea = document.getElementById('draggable-phrases-area');
                        const originalPhrase = Array.from(phrasesArea.children).find(
                            el => el.dataset.phrase === phrase
                        );
                        if (originalPhrase) {
                            originalPhrase.style.display = 'block';
                        }
                        
                        if (selectedPhrases.length === 0) {
                            const config = window.elementSdk?.config || defaultConfig;
                            dropArea.innerHTML = `<span class="placeholder-text">${config.response_placeholder || defaultConfig.response_placeholder}</span>`;
                            dropArea.classList.remove('has-phrases');
                        }
                    });
                    
                    dropArea.appendChild(responsePhrase);
                    
                    draggedElement.style.display = 'none';
                }
                
                draggedElement = null;
            }
        });

        document.getElementById('check-answer-btn').addEventListener('click', () => {
            const currentCase = cases[currentCaseIndex];
            const feedbackDiv = document.getElementById('feedback-message');
            
            const isCorrect = currentCase.correctPhrases.every(phrase => selectedPhrases.includes(phrase)) &&
                            selectedPhrases.every(phrase => currentCase.correctPhrases.includes(phrase));
            
            if (isCorrect) {
                const coinsEarned = 10;
                const pointsEarned = 100;
                
                showCoinAnimation();
                updateCoins(coinsEarned);
                updateScore(pointsEarned);
                
                feedbackDiv.className = 'feedback-area correct';
                feedbackDiv.innerHTML = `<strong>‚úì Correto! +${coinsEarned} ü™ô +${pointsEarned} ‚≠ê</strong><br>${currentCase.feedback}`;
            } else {
                showBombAnimation();
                
                feedbackDiv.className = 'feedback-area incorrect';
                feedbackDiv.innerHTML = `<strong>‚úó Incorreto. üí•</strong><br>As frases corretas s√£o: ${currentCase.correctPhrases.join(', ')}.<br><br>${currentCase.feedback}`;
            }
            
            document.getElementById('check-answer-btn').disabled = true;
            document.getElementById('next-case-btn').disabled = false;
        });

        document.getElementById('next-case-btn').addEventListener('click', () => {
            currentCaseIndex++;
            if (currentCaseIndex >= cases.length) {
                const gameContainer = document.getElementById('game-container');
                gameContainer.innerHTML = `
                    <div class="completion-screen">
                        <span class="completion-emoji">üéâ</span>
                        <h2>Parab√©ns!</h2>
                        <p style="font-size: 1.3em; color: #555; margin-top: 20px;">Voc√™ completou todos os casos cl√≠nicos!</p>
                        <div style="display: flex; gap: 30px; justify-content: center; margin-top: 30px; flex-wrap: wrap;">
                            <div style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); padding: 20px 40px; border-radius: 20px; box-shadow: 0 8px 24px rgba(243, 156, 18, 0.3);">
                                <div style="font-size: 3em;">ü™ô</div>
                                <div style="font-size: 2em; font-weight: bold; color: white; margin-top: 10px;">${coins}</div>
                                <div style="color: white; margin-top: 5px;">Moedas</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #27ae60 0%, #229954 100%); padding: 20px 40px; border-radius: 20px; box-shadow: 0 8px 24px rgba(39, 174, 96, 0.3);">
                                <div style="font-size: 3em;">‚≠ê</div>
                                <div style="font-size: 2em; font-weight: bold; color: white; margin-top: 10px;">${totalScore}</div>
                                <div style="color: white; margin-top: 5px;">Pontos</div>
                            </div>
                        </div>
                        <p style="font-size: 1.1em; color: #777; margin-top: 30px;">Continue estudando e aprimorando seus conhecimentos m√©dicos! ü©∫</p>
                    </div>
                `;
            } else {
                loadCase(currentCaseIndex);
            }
        });

        loadCase(0);

        // Criar bolhas flutuantes coloridas
        function createBubbles() {
            const bubbleContainer = document.body;
            const numberOfBubbles = 20;
            const colors = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5', 'color-6'];
            
            for (let i = 0; i < numberOfBubbles; i++) {
                const bubble = document.createElement('div');
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                bubble.className = `bubble ${randomColor}`;
                
                const size = Math.random() * 100 + 50;
                bubble.style.width = size + 'px';
                bubble.style.height = size + 'px';
                bubble.style.left = Math.random() * 100 + '%';
                
                const duration = Math.random() * 12 + 15;
                const delay = Math.random() * 12;
                bubble.style.animationDuration = duration + 's';
                bubble.style.animationDelay = delay + 's';
                
                bubbleContainer.appendChild(bubble);
            }
        }
        
        createBubbles();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a3c4c6cb390e142',t:'MTc2NDAyMjg3OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
